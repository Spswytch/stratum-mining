{"name":"Crypto-Experts Stratum-mining","tagline":"AIO Stratum mining server for POS, POW, sha256 and scrypt coins","body":"# Description\r\n\r\nThis guide will help you get stratum-mining setup including all dependencies and software required.\r\nPlease use this as a guide on how get things to work but keep in mind that things change and maybe this Wiki page is outdated and things do not work anymore as expected.\r\n\r\n\r\n# Coin Daemon\r\nThis version of stratum is designed with ease of use and cross compatability in mind. As such it currently works with SHA256 and Scrypt (Pure POW) coins. If a coin daemon hant been compiled then follow the below instructions\r\n\r\n## Requirements\r\n\r\nWe need to install the dependencies required:\r\n\r\n```\r\napt-get install build-essential libboost-all-dev libcurl4-openssl-dev libdb5.1-dev libdb5.1++-dev\r\n```\r\n\r\n## Download\r\n\r\nDownload the source code following the below example for litecoin:\r\n\r\n```\r\ncd ~\r\ngit clone git://github.com/litecoin-project/litecoin.git\r\n```\r\n\r\n## Compile\r\n\r\nWith the source downloaded and all dependencies installed we can now try to compile `litecoind`:\r\n```\r\n# Change to src folder\r\ncd ~\r\ncd litecoin/src\r\n# Compile litecoind\r\nmake -f makefile.unix USE_UPNP=-\r\n# Copy to system path\r\ncp litecoind /usr/bin\r\n```\r\nYou can now run litecoind getinfo. If you see a response litecoin is now setup and working properly .\r\n\r\n# Stratum Mining\r\n\r\n## Requirements\r\n\r\nFirst we need to install some packages required to run `stratum-mining`:\r\n\r\n```\r\napt-get install python-mysqldb python-dev  python-simplejson python-crypto\r\neasy_install -U distribute\r\n```\r\n\r\n## Downloading\r\n\r\nWe need to fetch `stratum-mining` and some additional requirements:\r\n\r\n```\r\ngit clone https://github.com/ahmedbodi/stratum-mining.git\r\n```\r\n\r\nThat covers the download. Lets go ahead and prepare the software!\r\n\r\n## Installation\r\nIf you are using stratum with a scrypt based coin we need to install 'litecoin_scrypt' 'stratum-mining-proxy and 'stratum'\r\nIf a SHA256 Based coin is being used then just 'stratum' and 'stratum-mining-proxy' is needed:\r\n\r\n```\r\ncd stratum-mining\r\ngit submodule init\r\ngit submodule update\r\n\r\ncd externals/litecoin_scrypt\r\npython setup.py install\r\n\r\ncd externals/stratum\r\npython setup.py install\r\n\r\ncd externals/stratum-mining-proxy\r\npython setup.py install\r\n```\r\n\r\nThis will compile and install the requirements to run `stratum-mining`.\r\n\r\n## Configuration\r\n\r\nNow that we have everything installed we can configure `stratum-mining`:\r\n\r\n```\r\ncd stratum-mining\r\ncp conf/config_sample.py conf/config.py\r\nnano conf/config.py\r\n```\r\n\r\nYou will need to adjust some settings for this to work:\r\n\r\n```\r\n# ******************** BASIC SETTINGS ***************\r\n# These are the MUST BE SET parameters!\r\n\r\nCENTRAL_WALLET = 'set_valid_addresss_in_config!'\t# local coin address where money goes\r\n\r\nCOINDAEMON_TRUSTED_HOST = 'localhost'\r\nCOINDAEMON_TRUSTED_PORT = 8332\r\nCOINDAEMON_TRUSTED_USER = 'user'\r\nCOINDAEMON_TRUSTED_PASSWORD = 'somepassword'\r\n\r\n# The available options are scrypt and sha256d.\r\nCOINDAEMON_ALGO = 'scrypt'\r\n\r\n#Port used for Stratum. \r\nLISTEN_SOCKET_TRANSPORT = 3313\r\n\r\n# ******************** Database  *********************\r\n\r\n# MySQL\r\nDB_MYSQL_HOST = 'localhost'\r\nDB_MYSQL_DBNAME = 'pooldb'\r\nDB_MYSQL_USER = 'pooldb'\r\nDB_MYSQL_PASS = '**empty**'\r\n\r\n#This is set to 20 to match MPOS and MMCFE's difficulty of 20\r\nPOOL_TARGET = 16\t\t\t# Pool-wide difficulty target int >= 1\r\n\r\n# When being used with the MPOS Frontend this helps to ensure that every block gets the correct share assigned to the block\r\nSOLUTION_BLOCK_HASH = True \r\n\r\n# ******************** Getwork Proxy Settings *********************\r\n# This enables a copy of slush's getwork proxy for old clients\r\n# It will also auto-redirect new clients to the stratum interface\r\n# so you can point ALL clients to: http://<yourserver>:<GW_PORT>\r\nGW_ENABLE = True    # Enable the Proxy\r\nGW_PORT = 3333      # Getwork Proxy Port\r\n\r\n```\r\n\r\nYou can fetch your wallet address via litecoind :\r\n\r\n```\r\nlitecoind getaccountaddress \"\"\r\n```\r\n\r\nAdd the settings required above and the stratum is ready to be started\r\n\r\n## Starting stratum-mining\r\n\r\nThis is the easy part. Change to the `stratum-mining` folder and fire up the service:\r\n\r\n```\r\ntwistd -ny launcher.tac\r\n```\r\n\r\nIf you want to run it in the background you can remove the `-ny` and replace it with `-y`:\r\n\r\n```\r\ntwistd -y launcher.tac\r\n```\r\n\r\n## Special Notes\r\n\r\nWhen running stratum-mining I noticed that stratum and pushpoold use different settings. @pooler was nice enough to explain it to me in detail:\r\n\r\n`pushpoold` uses a target bits terminology and stratum a difficulty setting. These are different. When running `pushpoold` at a target bit of 20 you will match the default setting of 16 in `startum-mining`. This will ensure that hashrates on `MPOS` match up! If you'd think you could set `pushpoold` to 16 and match it with stratum you will be off.\r\n\r\nHe devised a formula that can be used to change `startum` difficulty and match `pushpoold` and `MPOS` to it:\r\n\r\n`(stratum diff) ~= 2^((target bits in pushpool) - 16)`\r\n\r\nSo if you change your stratum dWhen running stratum-mining I noticed that stratum and pushpoold use different settings. @pooler was nice enough to explain it to me in detail:\r\n\r\npushpoold uses a target bits terminology and stratum a difficulty setting. These are different. When running pushpoold at a target bit of 20 you will match the default setting of 16 in startum-mining. This will ensure that hashrates on MPOS match up! If you'd think you could set pushpoold to 16 and match it with stratum you will be off.\r\n\r\nHe devised a formula that can be used to adjust `stratum` to match the difficulty used in `MPOS` (and `pushpoold`:\r\n\r\n(stratum diff) ~= 2^((target bits in pushpool) - 16)\r\n\r\nExample, you are running `MPOS` and `pushpoold` with a setting of `20`:\r\n\r\n`16 ~= 2^(20 - 16)`\r\n\r\nAdd the resulting `16` as the `POOL_TARGET` in the stratum configuration.\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}